CADDY ORCHESTRATOR CI/CD PIPELINE ARCHITECTURE
===============================================

┌─────────────────────────────────────────────────────────────────────┐
│                          GIT EVENTS                                  │
│                                                                      │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐           │
│  │  Push to │  │   Pull   │  │  Weekly  │  │  Manual  │           │
│  │   main   │  │  Request │  │ Schedule │  │ Trigger  │           │
│  └────┬─────┘  └────┬─────┘  └────┬─────┘  └────┬─────┘           │
└───────┼─────────────┼─────────────┼─────────────┼──────────────────┘
        │             │             │             │
        ▼             ▼             ▼             ▼
┌───────────────────────────────────────────────────────────────────────┐
│                        WORKFLOW TRIGGERS                               │
└───────────────────────────────────────────────────────────────────────┘
        │             │             │             │
    ┌───┴───┐     ┌───┴───┐     ┌───┴───┐     ┌───┴───┐
    │ ci.yml│     │  pr-  │     │security│     │cleanup│
    │       │     │checks │     │  .yml  │     │ .yml  │
    └───┬───┘     └───┬───┘     └───┬───┘     └───┬───┘
        │             │             │             │
        ▼             ▼             ▼             ▼

┌─────────────────────────────────────────────────────────────────────┐
│                        CI PIPELINE (ci.yml)                          │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐ │
│  │  BACKEND JOBS    │  │  FRONTEND JOBS   │  │   DOCKER JOBS    │ │
│  ├──────────────────┤  ├──────────────────┤  ├──────────────────┤ │
│  │ • Lint (gofmt,   │  │ • Lint (ESLint)  │  │ • Build Image    │ │
│  │   golangci-lint, │  │ • TypeCheck (tsc)│  │ • Cache Layers   │ │
│  │   go vet)        │  │ • Build (Vite)   │  │                  │ │
│  │ • Test (race,    │  │                  │  │                  │ │
│  │   coverage)      │  │                  │  │                  │ │
│  │ • Build (CGO)    │  │                  │  │                  │ │
│  └────────┬─────────┘  └────────┬─────────┘  └────────┬─────────┘ │
│           │                     │                     │            │
│           └─────────────────────┴──────────────────────┘            │
│                                 ▼                                   │
│                    ┌─────────────────────────┐                      │
│                    │   CI SUCCESS CHECK      │                      │
│                    │ (All jobs must pass)    │                      │
│                    └─────────────────────────┘                      │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│                  PR CHECKS (pr-checks.yml)                           │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐       │
│  │  PR Metadata   │  │ Change Detect  │  │   Conditional  │       │
│  ├────────────────┤  ├────────────────┤  │     Checks     │       │
│  │ • Title Check  │  │ • Backend      │  │ ┌────────────┐ │       │
│  │ • Size Label   │  │ • Frontend     │  │ │  Backend   │ │       │
│  │ • Commit Style │  │ • Docker       │  │ │  Checks    │ │       │
│  │                │  │ • Docs         │  │ └────────────┘ │       │
│  │                │  │                │  │ ┌────────────┐ │       │
│  │                │  │                │  │ │  Frontend  │ │       │
│  │                │  │                │  │ │  Checks    │ │       │
│  └────────────────┘  └────────────────┘  │ └────────────┘ │       │
│                                          │ ┌────────────┐ │       │
│                                          │ │  Coverage  │ │       │
│                                          │ │  Comment   │ │       │
│                                          │ └────────────┘ │       │
│                                          └────────────────┘       │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│                   SECURITY (security.yml)                            │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  ┌────────────┐ ┌────────────┐ ┌────────────┐ ┌────────────┐      │
│  │   Gosec    │ │ Go Vuln    │ │ NPM Audit  │ │   Trivy    │      │
│  │  Scanner   │ │  Check     │ │  Scanner   │ │  Scanner   │      │
│  └──────┬─────┘ └──────┬─────┘ └──────┬─────┘ └──────┬─────┘      │
│         │              │              │              │             │
│         └──────────────┴──────────────┴──────────────┘             │
│                        ▼                                            │
│              ┌──────────────────────┐                               │
│              │   CodeQL Analysis    │                               │
│              │  (Go & JavaScript)   │                               │
│              └──────────┬───────────┘                               │
│                         ▼                                           │
│              ┌──────────────────────┐                               │
│              │   Upload to GitHub   │                               │
│              │    Security Tab      │                               │
│              └──────────────────────┘                               │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│                DEPENDENCY MANAGEMENT                                 │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  Dependabot (Weekly, Mondays 9 AM UTC)                              │
│  ┌────────────┐ ┌────────────┐ ┌────────────┐ ┌────────────┐      │
│  │ Go Modules │ │NPM Packages│ │GitHub      │ │   Docker   │      │
│  │   Updates  │ │  Updates   │ │Actions     │ │   Images   │      │
│  └──────┬─────┘ └──────┬─────┘ └──────┬─────┘ └──────┬─────┘      │
│         │              │              │              │             │
│         └──────────────┴──────────────┴──────────────┘             │
│                        ▼                                            │
│              ┌──────────────────────┐                               │
│              │  Automated PR        │                               │
│              │  Creation            │                               │
│              └──────────┬───────────┘                               │
│                         ▼                                           │
│              ┌──────────────────────┐                               │
│              │ Dependency Review    │                               │
│              │ (License & Security) │                               │
│              └──────────────────────┘                               │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│                      ARTIFACTS & OUTPUTS                             │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  • Backend binary (7-day retention)                                 │
│  • Frontend dist folder (7-day retention)                           │
│  • Test coverage reports (uploaded to Codecov)                      │
│  • SARIF security reports (uploaded to GitHub Security)             │
│  • PR comments (coverage, size, validation)                         │
│  • Dependabot PRs (dependency updates)                              │
│                                                                      │
└─────────────────────────────────────────────────────────────────────┘

KEY FEATURES:
=============
✓ Parallel job execution for speed
✓ Smart caching (Go modules, NPM, Docker layers)
✓ Conditional execution based on file changes
✓ Multi-layer security scanning
✓ Automated dependency updates
✓ Comprehensive code quality checks
✓ Coverage tracking and reporting
✓ License compliance checking
✓ Conventional commit validation
✓ PR size labeling
✓ Automated cleanup of old workflow runs

PERFORMANCE OPTIMIZATIONS:
==========================
• Go module caching reduces dependency installation time
• NPM package caching speeds up frontend builds
• Docker layer caching minimizes rebuild time
• Conditional job execution saves CI minutes
• Parallel job execution maximizes throughput
• SARIF uploads enable GitHub Security integration

WORKFLOW EXECUTION TIMES (Estimated):
=====================================
ci.yml:               ~8-12 minutes
pr-checks.yml:        ~5-8 minutes
security.yml:         ~10-15 minutes
dependency-review:    ~2-3 minutes
cleanup:              ~1-2 minutes
